<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>AI Voice Diary</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="app-root">
    <header class="app-header">
        <div class="app-title">AI Voice Diary</div>
        <div class="user-row">
            <div class="app-user">Hi, {{ username }} !</div>
            <button id="start-conversation-btn">Start a New Conversation</button>
        </div>
    </header>

    <main class="app-main">
        <!-- Chat / recording -->
        <section class="page-section" id="section-chat">

            <div class="chat-layout">
                <div class="chat-left">
                    <h3>Today's Conversation</h3>
                    <div id="conversation" class="conversation-box"></div>

                    <div class="record-controls">
                        <button id="start-recording-btn" disabled>üéô Start</button>
                        <button id="stop-recording-btn" disabled>‚èπ Stop</button>
                        <button id="finish-conversation-btn" disabled>Finish &amp; Generate Diary</button>
                    </div>

                    <div id="conversation-status" class="status-text">
                        Ready.
                    </div>
                </div>

                <div class="chat-right">
                    <h4>Today&apos;s Diary (preview)</h4>
                    <article id="diary-detail-chat" class="diary-preview">
                        <h5 id="diary-title-chat"></h5>
                        <p id="diary-date-chat"></p>
                        <p id="diary-mood-chat"></p>
                        <p id="diary-content-chat"></p>
                    </article>
                </div>
            </div>
        </section>

        <!-- My diaries -->
        <section class="page-section hidden" id="section-diaries">
            <h3>My Diaries</h3>

            <div class="diary-search">
                <input id="diary-search-input" placeholder="Search by keyword..." />
                <button id="diary-search-btn">Search</button>
                <button id="diary-search-clear-btn">Clear</button>
            </div>

            <button id="load-diaries-btn">Reload Diaries</button>

            <div class="diary-layout">
                <ul id="diary-list"></ul>

                <article id="diary-detail" class="diary-detail">
                    <h4 id="diary-title"></h4>
                    <p id="diary-date"></p>
                    <p id="diary-time"></p> 
                    <p id="diary-mood"></p>
                    <p id="diary-content"></p>

                    <div class="diary-actions hidden">
                        <button id="diary-edit-btn">Edit</button>
                        <button id="diary-delete-btn">Delete</button>
                    </div>
                </article>
            </div>
        </section>

        <!-- Settings -->
        <section class="page-section hidden" id="section-settings">
            <h3>Settings</h3>
            <p>Logged in as: {{ username }}</p>
            <button onclick="logout()">Logout</button>
        </section>
    </main>

    <nav class="bottom-nav">
        <button class="nav-btn active" data-target="section-chat">Chat</button>
        <button class="nav-btn" data-target="section-diaries">My Diaries</button>
        <button class="nav-btn" data-target="section-settings">Settings</button>
    </nav>
</div>

<script>
    const currentUserId = "{{ user_id }}";
</script>
<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>